<!DOCTYPE html>
<html lang="bg">
<head>
  <meta charset="UTF-8">
  <title>WebHost Simulator - Prototype</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
    }

    body {
      background: #050816;
      color: #f4f4f4;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 100vh;
      padding: 20px;
    }

    .game {
      background: #0b1020;
      border-radius: 16px;
      padding: 20px;
      width: 900px;
      box-shadow: 0 0 20px rgba(0,0,0,0.6);
    }

    h1 {
      text-align: center;
      margin-bottom: 10px;
      letter-spacing: 1px;
    }

    .subtitle {
      text-align: center;
      font-size: 14px;
      color: #aaa;
      margin-bottom: 20px;
    }

    .top-bar {
      display: flex;
      justify-content: space-between;
      gap: 16px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .card {
      background: #111827;
      border-radius: 12px;
      padding: 14px 16px;
      flex: 1;
      min-width: 240px;
    }

    .card h2 {
      font-size: 16px;
      margin-bottom: 8px;
      color: #e5e7eb;
    }

    .stat {
      font-size: 14px;
      margin-bottom: 4px;
    }

    .stat span {
      font-weight: bold;
    }

    .controls {
      display: flex;
      gap: 12px;
      margin-top: 10px;
      flex-wrap: wrap;
    }

    button {
      border: none;
      border-radius: 999px;
      padding: 8px 14px;
      cursor: pointer;
      font-size: 14px;
      font-weight: bold;
      background: #2563eb;
      color: white;
      transition: transform 0.1s ease, box-shadow 0.1s ease, opacity 0.1s ease;
    }

    button:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 10px rgba(37,99,235,0.4);
    }

    button:active {
      transform: translateY(0);
      box-shadow: none;
      opacity: 0.9;
    }

    button:disabled {
      background: #4b5563;
      cursor: not-allowed;
      box-shadow: none;
      transform: none;
      opacity: 0.7;
    }

    .layout {
      display: grid;
      grid-template-columns: 2fr 1.5fr;
      gap: 16px;
    }

    .servers, .log {
      background: #111827;
      border-radius: 12px;
      padding: 14px 16px;
      min-height: 200px;
      max-height: 350px;
      overflow-y: auto;
    }

    .servers h2, .log h2 {
      font-size: 16px;
      margin-bottom: 8px;
    }

    .server-item {
      background: #020617;
      border-radius: 10px;
      padding: 8px 10px;
      margin-bottom: 6px;
      font-size: 13px;
      border: 1px solid #1f2933;
    }

    .log-entry {
      font-size: 12px;
      margin-bottom: 4px;
      color: #d1d5db;
    }

    .log-entry span {
      color: #9ca3af;
      font-size: 11px;
    }

    .warning {
      color: #fbbf24;
      font-size: 13px;
      margin-top: 6px;
      min-height: 16px;
    }

    .danger {
      color: #f87171;
    }

    .green {
      color: #4ade80;
    }

    .footer {
      margin-top: 10px;
      font-size: 12px;
      text-align: right;
      color: #6b7280;
    }
  </style>
</head>
<body>
  <div class="game">
    <h1>WebHost Simulator (Prototype)</h1>
    <div class="subtitle">
      –ó–∞–ø–æ—á–≤–∞—à —Å –º–∞–ª—ä–∫ –≥–∞—Ä–∞–∂–µ–Ω —Ö–æ—Å—Ç–∏–Ω–≥. –ö—É–ø—É–≤–∞–π —Å—ä—Ä–≤—ä—Ä–∏, –≤–∑–∏–º–∞–π –∫–ª–∏–µ–Ω—Ç–∏ –∏ –Ω–µ —Ñ–∞–ª–∏—Ä–∞–π. üí∏
    </div>

    <div class="top-bar">
      <div class="card">
        <h2>–§–∏–Ω–∞–Ω—Å–∏</h2>
        <div class="stat">–ë–∞–ª–∞–Ω—Å: <span id="money">0</span> –ª–≤</div>
        <div class="stat">–î–æ—Ö–æ–¥ –Ω–∞ —Ç–∏–∫: <span id="incomePerTick">0</span> –ª–≤</div>
        <div class="stat">–¢–∏–∫ –∏–Ω—Ç–µ—Ä–≤–∞–ª: <span id="tickTime">3</span> —Å–µ–∫—É–Ω–¥–∏</div>
        <div class="controls">
          <button id="btnBuyServer">–ö—É–ø–∏ —Å—ä—Ä–≤—ä—Ä (500 –ª–≤)</button>
          <button id="btnAddClient">–î–æ–±–∞–≤–∏ –∫–ª–∏–µ–Ω—Ç (–∏–∑–∏—Å–∫–≤–∞ —Å–≤–æ–±–æ–¥–µ–Ω —Å–ª–æ—Ç)</button>
        </div>
        <div id="warning" class="warning"></div>
      </div>

      <div class="card">
        <h2>–ò–Ω—Ñ–æ</h2>
        <div class="stat">–ë—Ä–æ–π —Å—ä—Ä–≤—ä—Ä–∏: <span id="serverCount">0</span></div>
        <div class="stat">–û–±—â –∫–∞–ø–∞—Ü–∏—Ç–µ—Ç: <span id="totalCapacity">0</span> –∫–ª–∏–µ–Ω—Ç–∏</div>
        <div class="stat">–û–±—â–æ –∫–ª–∏–µ–Ω—Ç–∏: <span id="totalClients">0</span></div>
        <div class="stat">–°–≤–æ–±–æ–¥–Ω–∏ —Å–ª–æ—Ç–æ–≤–µ: <span id="freeSlots">0</span></div>
      </div>
    </div>

    <div class="layout">
      <div class="servers">
        <h2>–°—ä—Ä–≤—ä—Ä–∏</h2>
        <div id="serversList"></div>
      </div>
      <div class="log">
        <h2>–õ–æ–≥</h2>
        <div id="logList"></div>
      </div>
    </div>

    <div class="footer">
      –ê–∫–æ —Ñ–∞–ª–∏—Ç–Ω–µ—à (–±–∞–ª–∞–Ω—Å &lt; 0), –ø—Ä–æ—Å—Ç–æ —Ä–µ—Ñ—Ä–µ—à–Ω–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ç–∞ –∑–∞ –Ω–æ–≤–∞ –∏–≥—Ä–∞.
    </div>
  </div>

  <script>
    // --- –ò–ì–†–û–í–ê –õ–û–ì–ò–ö–ê ---

    const state = {
      money: 1500,                  // —Å—Ç–∞—Ä—Ç–æ–≤ –±–∞–ª–∞–Ω—Å
      servers: [],                  // {id, capacity, used}
      clients: 0,                   // –æ–±—â –±—Ä–æ–π –∫–ª–∏–µ–Ω—Ç–∏
      incomePerClientPerTick: 40,  // –¥–æ—Ö–æ–¥ –Ω–∞ –∫–ª–∏–µ–Ω—Ç –Ω–∞ —Ç–∏–∫
      tickMs: 3000,                 // 3 —Å–µ–∫—É–Ω–¥–∏
      nextServerId: 1
    };

    const elements = {
      money: document.getElementById('money'),
      incomePerTick: document.getElementById('incomePerTick'),
      tickTime: document.getElementById('tickTime'),
      serverCount: document.getElementById('serverCount'),
      totalCapacity: document.getElementById('totalCapacity'),
      totalClients: document.getElementById('totalClients'),
      freeSlots: document.getElementById('freeSlots'),
      serversList: document.getElementById('serversList'),
      logList: document.getElementById('logList'),
      warning: document.getElementById('warning'),
      btnBuyServer: document.getElementById('btnBuyServer'),
      btnAddClient: document.getElementById('btnAddClient'),
    };

    function log(message, type = 'normal') {
      const entry = document.createElement('div');
      entry.className = 'log-entry';
      if (type === 'danger') entry.classList.add('danger');
      if (type === 'success') entry.classList.add('green');
      const time = new Date().toLocaleTimeString();
      entry.innerHTML = `<span>[${time}]</span> ${message}`;
      elements.logList.prepend(entry);
    }

    function updateUI() {
      const totalCapacity = state.servers.reduce((sum, s) => sum + s.capacity, 0);
      const used = state.servers.reduce((sum, s) => sum + s.used, 0);
      const freeSlots = totalCapacity - used;
      const incomePerTick = state.clients * state.incomePerClientPerTick;

      elements.money.textContent = state.money.toFixed(0);
      elements.incomePerTick.textContent = incomePerTick.toFixed(0);
      elements.tickTime.textContent = (state.tickMs / 1000).toFixed(0);

      elements.serverCount.textContent = state.servers.length;
      elements.totalCapacity.textContent = totalCapacity;
      elements.totalClients.textContent = state.clients;
      elements.freeSlots.textContent = freeSlots;

      // –æ–±–Ω–æ–≤—è–≤–∞–Ω–µ —Å–ø–∏—Å—ä–∫ —Å—ä—Å —Å—ä—Ä–≤—ä—Ä–∏
      elements.serversList.innerHTML = '';
      state.servers.forEach(server => {
        const div = document.createElement('div');
        div.className = 'server-item';
        div.innerHTML = `
          <div><b>–°—ä—Ä–≤—ä—Ä #${server.id}</b></div>
          <div>–ö–∞–ø–∞—Ü–∏—Ç–µ—Ç: ${server.used} / ${server.capacity} –∫–ª–∏–µ–Ω—Ç–∏</div>
        `;
        elements.serversList.appendChild(div);
      });

      // –∞–∫–æ –ø–∞—Ä–∏—Ç–µ —Å–∞ –º–∏–Ω—É—Å - game over (–Ω–æ –Ω–µ —Ä–µ–∂–µ–º –±—É—Ç–æ–Ω–∏—Ç–µ, –¥–∞ –º–æ–∂–µ—à –¥–∞ —Å–µ –±—ä–∑–∏–∫–∞—à)
      if (state.money < 0) {
        elements.warning.textContent = '‚ö† –§–ê–õ–ò–¢! –ë–∞–ª–∞–Ω—Å—ä—Ç —Ç–∏ –µ –ø–æ–¥ 0. –†–µ—Ñ—Ä–µ—à–Ω–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ç–∞ –∑–∞ –Ω–æ–≤–∞ –∏–≥—Ä–∞.';
        elements.warning.classList.add('danger');
      }
    }

    function getFreeSlots() {
      const totalCapacity = state.servers.reduce((sum, s) => sum + s.capacity, 0);
      const used = state.servers.reduce((sum, s) => sum + s.used, 0);
      return totalCapacity - used;
    }

    // –ö—É–ø—É–≤–∞–Ω–µ –Ω–∞ —Å—ä—Ä–≤—ä—Ä
    function buyServer() {
      const price = 500;
      if (state.money < price) {
        elements.warning.textContent = '–ù—è–º–∞—à –¥–æ—Å—Ç–∞—Ç—ä—á–Ω–æ –ø–∞—Ä–∏ –∑–∞ –Ω–æ–≤ —Å—ä—Ä–≤—ä—Ä (500 –ª–≤).';
        elements.warning.classList.remove('danger');
        return;
      }

      state.money -= price;

      // –ú–æ–∂–µ—à –¥–∞ –Ω–∞–ø—Ä–∞–≤–∏—à —Ä–∞–∑–ª–∏—á–Ω–∏ –∫–∞–ø–∞—Ü–∏—Ç–µ—Ç–∏ –ø–æ-–∫—ä—Å–Ω–æ
      const capacity = 5 + Math.floor(Math.random() * 6); // 5‚Äì10 –∫–ª–∏–µ–Ω—Ç–∏
      state.servers.push({
        id: state.nextServerId++,
        capacity,
        used: 0
      });

      elements.warning.textContent = '';
      log(`–ö—É–ø–∏ —Å—ä—Ä–≤—ä—Ä —Å –∫–∞–ø–∞—Ü–∏—Ç–µ—Ç ${capacity} –∫–ª–∏–µ–Ω—Ç–∏ –∑–∞ ${price} –ª–≤.`, 'success');
      updateUI();
    }

    // –î–æ–±–∞–≤—è–Ω–µ –Ω–∞ –∫–ª–∏–µ–Ω—Ç
    function addClient() {
      const freeSlots = getFreeSlots();
      if (freeSlots <= 0) {
        elements.warning.textContent = '–ù—è–º–∞—à —Å–≤–æ–±–æ–¥–Ω–∏ —Å–ª–æ—Ç–æ–≤–µ. –ö—É–ø–∏ –Ω–æ–≤ —Å—ä—Ä–≤—ä—Ä.';
        elements.warning.classList.remove('danger');
        log('–û–ø–∏—Ç–∞ –¥–∞ –¥–æ–±–∞–≤–∏—à –∫–ª–∏–µ–Ω—Ç, –Ω–æ –Ω—è–º–∞ —Å–≤–æ–±–æ–¥–Ω–∏ —Å–ª–æ—Ç–æ–≤–µ.', 'danger');
        return;
      }

      // —Å–ª–∞–≥–∞–º–µ –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—ä—Ä–≤–∏—è —Å—ä—Ä–≤—ä—Ä —Å —Å–≤–æ–±–æ–¥–Ω–æ –º—è—Å—Ç–æ
      for (const server of state.servers) {
        if (server.used < server.capacity) {
          server.used += 1;
          break;
        }
      }

      state.clients += 1;
      elements.warning.textContent = '';
      log('–ù–æ–≤ –∫–ª–∏–µ–Ω—Ç –∞–∫—Ç–∏–≤–∏—Ä–∞ —Ö–æ—Å—Ç–∏–Ω–≥ –ø–ª–∞–Ω. –î–æ—Ö–æ–¥—ä—Ç —Ç–∏ –Ω–∞ —Ç–∏–∫ —Å–µ —É–≤–µ–ª–∏—á–∏.', 'success');
      updateUI();
    }

    // –¢–∏–∫ —Å–∏—Å—Ç–µ–º–∞ - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ–Ω –¥–æ—Ö–æ–¥
    function gameTick() {
      const incomePerTick = state.clients * state.incomePerClientPerTick;
      if (incomePerTick !== 0) {
        state.money += incomePerTick;
        log(`–ü–æ–ª—É—á–∏ ${incomePerTick.toFixed(0)} –ª–≤ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∏—Ç–µ —Å–∏.`, 'normal');
      } else {
        // –Ω–µ —Å–ø–∞–º–∏–º –ª–æ–≥, –∞–∫–æ –Ω—è–º–∞—à –∫–ª–∏–µ–Ω—Ç–∏
      }

      updateUI();
    }

    // –ó–∞–∫–∞—á–∞–º–µ –±—É—Ç–æ–Ω–∏—Ç–µ
    elements.btnBuyServer.addEventListener('click', buyServer);
    elements.btnAddClient.addEventListener('click', addClient);

    // –°—Ç–∞—Ä—Ç
    function initGame() {
      log('–î–æ–±—Ä–µ –¥–æ—à—ä–ª –≤ WebHost Simulator Prototype. –ó–∞–ø–æ—á–≤–∞—à —Å 1500 –ª–≤ –∏ 0 —Å—ä—Ä–≤—ä—Ä–∞.');
      updateUI();
      setInterval(gameTick, state.tickMs);
    }

    initGame();
  </script>
</body>
</html>
